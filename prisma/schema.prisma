// Configuração do PostgreSQL
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")  // Definido no arquivo .env
}

generator client {
  provider = "prisma-client-js"
}

// Tabela de relógio principal
model relogio_principal {
  id            Int      @id @default(autoincrement())  // Identificador único
  nome          String   @db.VarChar(100)  // Nome do relógio principal
  referencia    DateTime // Mês/Ano da fatura
  kwh_fatura    Decimal  // Consumo total no mês (não acumulado)
  valor_fatura  Decimal  // Valor da fatura
  observacao    String?  @db.Text  // Campo opcional para anotações

  sub_relogios  sub_relogio[] // Relacionamento com os sub-relógios
}

// Tabela de sub-relógio
model sub_relogio {
  id                    Int      @id @default(autoincrement())  // Identificador único
  id_relogio_principal  Int      // Relacionamento com o relógio principal
  nome                  String   @db.VarChar(100)  // Nome do sub-relógio
  referencia            DateTime // Mês/Ano da medição
  kwh_acumulado         Decimal  // Total de kWh acumulado até aquele mês
  ativo                 Boolean  // Indica se o sub-relógio está em uso
  observacao            String?  @db.Text  // Comentários opcionais

  relogio_principal     relogio_principal @relation(fields: [id_relogio_principal], references: [id])
}
